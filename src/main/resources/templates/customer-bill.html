<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Customer Bill</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
</head>
<body>

<!-- Navbar -->
<div class="fixed-top">
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand text-light" th:href="@{/}">CEB Meter Reading System</a>
    </nav>
</div>

<br><br><br><br><br>

<div class="container mt-5">
    <div class="card">
        <div class="card-header bg-primary text-light">
            <h3>View Your Last Bill</h3>
        </div>
        <div class="card-body">
            <form th:action="@{/customer/bill}" method="get" class="form-inline">
                <div class="form-group mb-2">
                    <label for="accountNumber" class="sr-only">Account Number</label>
                    <input type="text" class="form-control" id="accountNumber" name="accountNumber" placeholder="Enter Account Number" required>
                </div>
                <button type="submit" class="btn btn-primary mb-2 ml-2">View Bill</button>
            </form>
        </div>
    </div>

    <div th:if="${bill != null}" class="card mt-4">
        <div class="card-header bg-success text-light">
            <h4>Bill Details for Account: <span th:text="${bill.accountNumber}"></span></h4>
        </div>
        <div class="card-body">
            <table class="table table-bordered">
                <tbody>
                <tr>
                    <th>Last Reading Date</th>
                    <td th:text="${bill.lastReadingDate}"></td>
                </tr>
                <tr>
                    <th>Previous Reading Date</th>
                    <td th:text="${bill.previousReadingDate}"></td>
                </tr>
                <tr>
                    <th>Last Meter Reading</th>
                    <td th:text="${bill.lastMeterReading}"></td>
                </tr>
                <tr>
                    <th>Previous Meter Reading</th>
                    <td th:text="${bill.previousMeterReading}"></td>
                </tr>
                <tr>
                    <th>Fixed Charge Amount</th>
                    <td th:text="${bill.fixedChargeAmount}"></td>
                </tr>
                <tr>
                    <th>First Range Billed Amount</th>
                    <td th:text="${bill.firstRangeAmount}"></td>
                </tr>
                <tr>
                    <th>Second Range Billed Amount</th>
                    <td th:text="${bill.secondRangeAmount}"></td>
                </tr>
                <tr>
                    <th>Third Range Billed Amount</th>
                    <td th:text="${bill.thirdRangeAmount}"></td>
                </tr>
                <tr>
                    <th>Total Billed Amount</th>
                    <td th:text="${bill.totalBilledAmount}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div th:if="${bill == null and searched}">
        <div class="alert alert-danger mt-4" role="alert">
            No bill found for the entered account number.
        </div>
    </div>
</div>

</body>
</html>
